import{_ as $,g as V,u as N,h as E,i as U,j as p,r as b,c as n,a as t,b as D,F as k,k as A,f as L,o as d,t as o}from"./index--2fNskIG.js";import{A as S}from"./ArticleForm-CFPqZJAT.js";const j={class:"p-5"},B={class:"min-w-full bg-white"},P={class:"py-2 px-4 border-b"},H=["src"],q={class:"py-2 px-4 border-b"},z={class:"py-2 px-4 border-b"},G=["href"],J={class:"py-2 px-4 border-b"},K={class:"py-2 px-4 border-b"},M={class:"py-2 px-4 border-b"},Q={class:"py-2 px-4 border-b w-20"},R=["onClick"],X={class:"min-w-full bg-white"},Y={class:"py-2 px-4 border-b"},Z=["src"],tt={class:"py-2 px-4 border-b"},et={class:"py-2 px-4 border-b"},st=["href"],rt={class:"py-2 px-4 border-b"},ot={class:"py-2 px-4 border-b"},it={class:"py-2 px-4 border-b"},nt={__name:"DashboardView",setup(dt){const l=V(),i=N().auth;E(),U();const y=p(()=>i.Type==="Writer");p(()=>i.Type==="Editor");const w=p(()=>l.articles.filter(e=>e.Status==="For Edit")),T=p(()=>l.articles.filter(e=>e.Status==="Published")),W=b({Title:"",Image:"",Link:"",Date:"",Content:"",Status:"For Edit",Writer:i.id,Editor:"",Company:"",userType:"Writer"}),c=b(!1),h=b(!1),f=b({id:null,Title:"",Image:"",Link:"",Date:"",Content:"",Status:"For Edit",Writer:"",Editor:"",Company:"",userType:"Writer"});function v(e){e.Writer=i.id,e.Status="For Edit",e.userType=i.Type,e.Writer=i.id,l.addArticle(e),x()}function F(){c.value=!0}function x(){c.value=!1}function C(e){f.value={...e},h.value=!0}function g(){h.value=!1}function I(e){e.userType=i.Type,e.Writer=i.id,l.editArticle(e.id,e),g()}function O(e){return y.value&&e.Status==="For Edit"&&e.Writer===i.id}function a(e,r){const s=E();console.log("HELLO",e);let _=s.writerList.find(m=>m.id==e.Writer),u=s.editorList.find(m=>m.id==e.Editor);if(r==0&&e.userType=="Writer")return`${_.Firstname} ${_.Lastname}`;if(r==0&&e.userType=="Editor")return`${u.Firstname} ${u.Lastname}`;if(r==1)return`${u.Firstname} ${u.Lastname}`}return(e,r)=>(d(),n("div",j,[r[2]||(r[2]=t("h1",{class:"text-2xl font-bold mb-4 mt-10 text-center"},"Dashboard",-1)),y.value?(d(),n("button",{key:0,onClick:F,class:"bg-green-500 text-white p-2 rounded mb-6 float-end"},"Add Article")):D("",!0),r[3]||(r[3]=t("h2",{class:"text-xl font-semibold mb-4"},"For Edit",-1)),t("table",B,[r[0]||(r[0]=t("thead",null,[t("tr",null,[t("th",{class:"py-2 px-4 border-b"},"Image"),t("th",{class:"py-2 px-4 border-b"},"Title"),t("th",{class:"py-2 px-4 border-b"},"Link"),t("th",{class:"py-2 px-4 border-b"},"Date"),t("th",{class:"py-2 px-4 border-b"},"Writer"),t("th",{class:"py-2 px-4 border-b"},"Editor"),t("th",{class:"py-2 px-4 border-b"},"Actions")])],-1)),t("tbody",null,[(d(!0),n(k,null,A(w.value,s=>(d(),n("tr",{key:s.id},[t("td",P,[t("img",{src:s.Image,alt:"Article Image",class:"w-16 h-16 object-cover"},null,8,H)]),t("td",q,o(s.Title),1),t("td",z,[t("a",{href:s.Link,target:"_blank"},o(s.Link),9,G)]),t("td",J,o(new Date(s.Date).toLocaleDateString()),1),t("td",K,o(a(s,0)),1),t("td",M,o(a(s,1)),1),t("td",Q,[O(s)?(d(),n("button",{key:0,onClick:_=>C(s),class:"bg-yellow-500 text-white p-2 rounded mr-2 w-full"},"Edit",8,R)):D("",!0)])]))),128))])]),r[4]||(r[4]=t("h2",{class:"text-xl font-semibold mb-4"},"Published",-1)),t("table",X,[r[1]||(r[1]=t("thead",null,[t("tr",null,[t("th",{class:"py-2 px-4 border-b"},"Image"),t("th",{class:"py-2 px-4 border-b"},"Title"),t("th",{class:"py-2 px-4 border-b"},"Link"),t("th",{class:"py-2 px-4 border-b"},"Date"),t("th",{class:"py-2 px-4 border-b"},"Writer"),t("th",{class:"py-2 px-4 border-b"},"Editor")])],-1)),t("tbody",null,[(d(!0),n(k,null,A(T.value,s=>(d(),n("tr",{key:s.id},[t("td",Y,[t("img",{src:s.Image,alt:"Article Image",class:"w-16 h-16 object-cover"},null,8,Z)]),t("td",tt,o(s.Title),1),t("td",et,[t("a",{href:s.Link,target:"_blank"},o(s.Link),9,st)]),t("td",rt,o(new Date(s.Date).toLocaleDateString()),1),t("td",ot,o(a(s,0)),1),t("td",it,o(a(s,1)),1)]))),128))])]),L(S,{isOpen:c.value,isEdit:!1,article:W.value,onSubmit:v,onClose:x},null,8,["isOpen","article"]),L(S,{isOpen:h.value,isEdit:!0,article:f.value,onSubmit:I,onClose:g},null,8,["isOpen","article"])]))}},ut=$(nt,[["__scopeId","data-v-6530830f"]]);export{ut as default};
